(this["webpackJsonpmetamask-address-book"]=this["webpackJsonpmetamask-address-book"]||[]).push([[0],{100:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t){},117:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){"use strict";a.r(t);var n,c=a(9),s=a.n(c),i=a(78),r=a.n(i),o=a(137),d=a(15),l=a(80),u=a(79),j=a.n(u),b=(a(98),a(8)),m=function(e){var t=e.children,a=e.actionType,n=void 0===a?"primary":a,c=e.isDisabled,s=e.onClick;return Object(b.jsx)("button",{className:j()("btn","btn--".concat(n),{btn__disabled:c}),onClick:s,type:"button",disabled:c,children:t})},O=(a(100),function(){var e=Object(l.a)().activateBrowserWallet;return Object(b.jsxs)("section",{className:"sign-in",children:[Object(b.jsx)("img",{width:"256",alt:"MetaMask Fox",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/36/MetaMask_Fox.svg/256px-MetaMask_Fox.svg.png"}),Object(b.jsx)("h1",{children:"Crypto address book"}),Object(b.jsxs)("p",{className:"sign-in--text",children:["The easiest and quickest way to manage and pay your contacts. ",Object(b.jsx)("br",{})," ","Connect yout wallet to begin."]}),Object(b.jsx)(m,{actionType:"primary",onClick:function(){e()},children:"Connect Wallet"})]})}),v=a(27),f=(a(102),function(e){return e.split(" ").map((function(e){var t;return null===(t=e[0])||void 0===t?void 0:t.toUpperCase()})).slice(0,2)}),p=function(e){var t=e.name;return Object(b.jsx)("div",{className:"avatar-placeholder",children:f(t)})},h=(a(103),function(e){var t=e.contacts,a=e.onAddNewContact,n=e.onSelectContact;return Object(b.jsxs)("div",{className:"contact-list",children:[Object(b.jsx)("h1",{children:"Address Book"}),Object(b.jsx)(m,{actionType:"link",onClick:a,children:Object(b.jsxs)("div",{className:"contact-list--new-contact",children:[Object(b.jsx)("div",{children:"+"}),Object(b.jsx)("div",{children:"New Contact"})]})}),Object(b.jsx)("div",{className:"contact-list--contacts",children:t.map((function(e){return Object(b.jsxs)(m,{actionType:"link",onClick:function(){n(e)},children:[Object(b.jsx)(p,{name:e.name}),Object(b.jsx)("span",{className:"contact-card--name",children:e.name})]},e.name)}))})]})}),N=a(11),x=(a(104),function(e){var t=e.label,a=e.id,n=e.value,c=e.type,s=e.error,i=e.onChange;return Object(b.jsxs)("label",{htmlFor:a,className:"input ".concat(s?"input__error":""),children:[Object(b.jsx)("span",{children:t}),Object(b.jsx)("input",{type:c,id:a,value:n,onChange:i,required:!!s}),Object(b.jsx)("span",{children:s})]})}),S=(a(105),function(e){var t=e.text;return Object(b.jsxs)("div",{className:"loader--container",children:[Object(b.jsx)("div",{className:"loader--spinner"}),Object(b.jsx)("span",{children:t})]})});!function(e){e[e.UPDATE_NAME=0]="UPDATE_NAME",e[e.UPDATE_ADDRESS=1]="UPDATE_ADDRESS",e[e.UPDATE_ENS_NAME=2]="UPDATE_ENS_NAME",e[e.SELECT_ADDRESS_INPUT_TYPE=3]="SELECT_ADDRESS_INPUT_TYPE"}(n||(n={}));var y=function(e){return{type:n.UPDATE_NAME,payload:{name:e}}},g=function(e){return{type:n.UPDATE_ADDRESS,payload:{address:e}}},E=function(e){return{type:n.UPDATE_ENS_NAME,payload:{ensName:e}}},C=function(e,t){return{type:n.SELECT_ADDRESS_INPUT_TYPE,payload:{addressInputType:e,selectedContact:t}}},D=function(e,t){switch(t.type){case n.UPDATE_NAME:var a=t.payload.name;return Object(N.a)(Object(N.a)({},e),{},{editedContact:Object(N.a)(Object(N.a)({},e.editedContact),{},{name:a}),isDirtyMap:Object(N.a)(Object(N.a)({},e.isDirtyMap),{},{name:!0})});case n.UPDATE_ADDRESS:var c=t.payload.address;return Object(N.a)(Object(N.a)({},e),{},{editedContact:Object(N.a)(Object(N.a)({},e.editedContact),{},{address:c}),isDirtyMap:Object(N.a)(Object(N.a)({},e.isDirtyMap),{},{address:!0})});case n.UPDATE_ENS_NAME:var s=t.payload.ensName;return Object(N.a)(Object(N.a)({},e),{},{editedContact:Object(N.a)(Object(N.a)({},e.editedContact),{},{ensName:s}),isDirtyMap:Object(N.a)(Object(N.a)({},e.isDirtyMap),{},{ensName:!0})});case n.SELECT_ADDRESS_INPUT_TYPE:var i,r,o=t.payload,d=o.addressInputType,l=o.selectedContact;return"address"===d?Object(N.a)(Object(N.a)({},e),{},{addressInputType:d,editedContact:Object(N.a)(Object(N.a)({},e.editedContact),{},{ensName:null!==(i=null===l||void 0===l?void 0:l.ensName)&&void 0!==i?i:""}),isDirtyMap:Object(N.a)(Object(N.a)({},e.isDirtyMap),{},{ensName:!1})}):"ensName"===d?Object(N.a)(Object(N.a)({},e),{},{addressInputType:d,editedContact:Object(N.a)(Object(N.a)({},e.editedContact),{},{address:null!==(r=null===l||void 0===l?void 0:l.address)&&void 0!==r?r:""}),isDirtyMap:Object(N.a)(Object(N.a)({},e.isDirtyMap),{},{address:!1})}):e;default:return e}},T=(a(106),function(e){var t,a=e.addressInputType,n=e.selectedContact,s=e.editedContact,i=e.formErrors,r=e.dispatch;return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsxs)("div",{className:"address-area--address-type-switch ".concat(a),children:[Object(b.jsx)(m,{actionType:"link",onClick:function(){r(C("address",n))},children:"Address"}),Object(b.jsx)(m,{actionType:"link",onClick:function(){r(C("ensName",n))},children:"ENS"})]}),"address"===a&&Object(b.jsx)(x,{label:"Address",id:"address",type:"text",value:s.address,error:i.address,onChange:function(e){r(g(e.target.value))}}),"ensName"===a&&Object(b.jsx)(x,{label:"ENS Name",id:"ensName",type:"text",value:null!==(t=s.ensName)&&void 0!==t?t:"",error:i.ensName,onChange:function(e){r(E(e.target.value))}})]})}),k=a(1),P=a.n(k),A=a(20),M=a(138),_=function(){var e=Object(A.a)(P.a.mark((function e(t,a){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new M.a.EtherscanProvider("rinkeby","QSS16G3BBVXPZ5SKDZ8WE1SEAJB8NUJ9TU"),e.abrupt("return",n.resolveName(t));case 5:e.prev=5,e.t0=e.catch(0),(null===a||void 0===a?void 0:a.setNotification)&&(null===a||void 0===a||a.setNotification({message:"Something went wrong when resolving ENS name. Please try again.",type:"error"}));case 8:return e.abrupt("return",void 0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}(),w=function(e,t){(null===t||void 0===t?void 0:t.setNotification)&&(null===t||void 0===t||t.setNotification({message:"Contact ".concat("edit"===e?"edited":"added"," successfully"),type:"success"}))},U=(a(117),function(e){var t=e.formMode,a=e.contacts,n=e.selectedContact,s=e.onSave,i=e.onDelete,r=Object(c.useReducer)(D,function(e){return{editedContact:null!==e&&void 0!==e?e:{name:"",address:"",ensName:""},isDirtyMap:{name:!1,address:!1,ensName:!1},addressInputType:"address"}}(n)),o=Object(d.a)(r,2),l=o[0],u=o[1],j=Object(c.useState)(!1),O=Object(d.a)(j,2),v=O[0],f=O[1],p=Object(c.useState)({isSaveDisabled:!1}),h=Object(d.a)(p,2),g=h[0],E=h[1],C=Object(c.useContext)(V);return Object(c.useEffect)((function(){E(function(e,t,a,n,c){var s={isSaveDisabled:!1};return t.address&&!M.b.isAddress(e.address)&&(s=Object(N.a)(Object(N.a)({},s),{},{address:"Please enter a valid Ethereum address",isSaveDisabled:!0})),""===e.name&&(s=Object(N.a)(Object(N.a)({},s),{},{name:t.name&&""===e.name?"Please enter a name":void 0,isSaveDisabled:!0})),t.address&&""===e.address&&(s=Object(N.a)(Object(N.a)({},s),{},{address:""===e.address?"Please enter an address":void 0,isSaveDisabled:!0})),t.ensName&&""===e.ensName&&(s=Object(N.a)(Object(N.a)({},s),{},{ensName:""===e.ensName?"Please enter an ENS name":void 0,isSaveDisabled:!0})),""===e.address&&""===e.ensName&&(s=Object(N.a)(Object(N.a)({},s),{},{isSaveDisabled:!0})),t.name&&e.name!==(null===n||void 0===n?void 0:n.name)&&(null===c||void 0===c?void 0:c.find((function(t){return t.name===e.name})))&&(s=Object(N.a)(Object(N.a)({},s),{},{name:"".concat(e.name," already exists"),isSaveDisabled:!0})),t.name||t.address||t.ensName||(s=Object(N.a)(Object(N.a)({},s),{},{isSaveDisabled:!0})),"edit"===a&&e.name===(null===n||void 0===n?void 0:n.name)&&e.address===(null===n||void 0===n?void 0:n.address)&&e.ensName===(null===n||void 0===n?void 0:n.ensName)&&(s=Object(N.a)(Object(N.a)({},s),{},{isSaveDisabled:!0})),s}(l.editedContact,l.isDirtyMap,t,n,a))}),[l,t,n,a]),Object(b.jsxs)("div",{className:"contact-form--container",children:[Object(b.jsxs)("h1",{className:"contact-form--header",children:["edit"===t?"Edit":"New"," Contact"]}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault()},className:"contact-form--form",children:[Object(b.jsx)(x,{label:"Name",id:"name",type:"text",value:l.editedContact.name,error:g.name,onChange:function(e){u(y(e.target.value))}}),Object(b.jsx)(T,{addressInputType:l.addressInputType,selectedContact:n,editedContact:l.editedContact,formErrors:g,dispatch:u}),Object(b.jsxs)("div",{className:"contact-form--form--actions",children:["edit"===t&&Object(b.jsx)(m,{actionType:"tertiary",onClick:function(){i&&n&&(i(),function(e,t){(null===t||void 0===t?void 0:t.setNotification)&&(null===t||void 0===t||t.setNotification({message:"".concat(e," deleted from contacts"),type:"success"}))}(n.name,C))},children:"Delete Contact"}),Object(b.jsx)(m,{actionType:"primary",isDisabled:g.isSaveDisabled,onClick:function(){l.editedContact&&("ensName"===l.addressInputType&&l.editedContact.ensName?(f(!0),_(l.editedContact.ensName,C).then((function(e){e&&(s(Object(N.a)(Object(N.a)({},l.editedContact),{},{address:e})),w(t,C)),E(Object(N.a)(Object(N.a)({},g),{},{ensName:"Provided ENS name was not recognised",isSaveDisabled:!0})),f(!1)}))):(s(Object(N.a)(Object(N.a)({},l.editedContact),{},{ensName:void 0})),w(t,C)))},children:"Save"}),Object(b.jsx)("div",{className:"contact-form--loader",children:v&&Object(b.jsx)(S,{text:"Checking ENS name"})})]})]})]})}),I=a(139),F=a(88),B=function(e){var t=e.isLoadingFee,a=e.fee;return void 0!==a||t?t?Object(b.jsx)(S,{text:"Estimating tx fee... "}):Object(b.jsxs)("span",{children:["Estimated tx fee: ",null===a||void 0===a?void 0:a.eth.slice(0,8)," ETH,"," ",(null===a||void 0===a?void 0:a.nzd)&&"$".concat(a.nzd," NZD")]}):Object(b.jsx)("span",{children:"Enter amount to see the estimated tx fee"})},J=a(140),R=function(){var e=Object(A.a)(P.a.mark((function e(t,a,n){var c,s,i,r,o,l,u;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new M.a.EtherscanProvider("rinkeby","QSS16G3BBVXPZ5SKDZ8WE1SEAJB8NUJ9TU"),e.prev=1,e.next=4,Promise.all([c.estimateGas({to:a,value:M.b.parseEther(t.toString())}),c.getGasPrice()]);case 4:return s=e.sent,i=Object(d.a)(s,2),r=i[0],o=i[1],l=M.b.formatEther(r.mul(o)),u=n&&(Number.parseFloat(l)*Number.parseFloat(n)).toFixed(2).toString(),e.abrupt("return",{eth:l,nzd:u});case 13:e.prev=13,e.t0=e.catch(1),console.log("error while estimating gas",e.t0);case 16:return e.abrupt("return",void 0);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,a,n){return e.apply(this,arguments)}}(),L=function(e,t){(null===t||void 0===t?void 0:t.setNotification)&&(null===t||void 0===t||t.setNotification({message:e,type:"error"}))},W=(a(118),function(e){var t=e.contact,a=e.onEditContact,n=Object(c.useState)(),s=Object(d.a)(n,2),i=s[0],r=s[1],o=Object(c.useState)(!1),u=Object(d.a)(o,2),j=u[0],O=u[1],v=Object(c.useState)(!1),f=Object(d.a)(v,2),h=f[0],y=f[1],g=Object(c.useState)(),E=Object(d.a)(g,2),C=E[0],D=E[1],T=Object(c.useRef)(!1),k=function(e,t,a,n,s){var i=Object(J.a)(),r=i.sendTransaction,o=i.state,d=Object(c.useContext)(V);return Object(c.useEffect)((function(){var c;"Success"===o.status&&s&&function(e,t,a){(null===a||void 0===a?void 0:a.setNotification)&&(null===a||void 0===a||a.setNotification({message:"Sent ".concat(e," ETH to ").concat(t),type:"success"}))}(s,e,d),"Exception"===o.status&&(null===(c=o.errorMessage)||void 0===c?void 0:c.includes("User denied transaction"))&&L("You're the boss. Transaction rejected.",d),"Fail"===o.status&&L("Something went wrong. Please try again.",d),"Mining"!==o.status&&(t(!1),a(0),n.current=!1)}),[o]),r}(t.name,O,r,T,i),_=Object(l.a)().account,w=Object(I.a)(_),U=Object(F.a)("ethereum","nzd"),W=Object(c.useMemo)((function(){return function(e,t,a){var n={isSendDisabled:!1};return 0===t&&(n={isSendDisabled:!0}),e&&!t&&(n=Object(N.a)(Object(N.a)({},n),{},{isSendDisabled:!0,message:"Please enter amount"})),e&&a&&t&&M.b.parseUnits(t.toString(),"ether").gt(a)&&(n={isSendDisabled:!0,message:"Please come back from the moon."}),n}(T.current,i,w)}),[T,i,w]);return Object(c.useEffect)((function(){Object(A.a)(P.a.mark((function e(){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=7;break}return y(!0),e.next=4,R(i,t.address,U);case 4:a=e.sent,D(a),y(!1);case 7:case"end":return e.stop()}}),e)})))()}),[i,t.address,U]),Object(b.jsxs)("div",{className:"transaction-form",children:[Object(b.jsxs)("div",{className:"transaction-form--contact-data",children:[Object(b.jsxs)("h1",{children:["Send to ",t.name]}),Object(b.jsx)("div",{className:"transaction-form--address",children:t.address}),Object(b.jsx)(p,{name:t.name}),Object(b.jsx)(m,{actionType:"link",onClick:function(){a()},children:"edit contact"})]}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault()},className:"transaction-form--form",children:[Object(b.jsx)(x,{label:"Transaction amount",id:"transactionAmount",value:null!==i&&void 0!==i?i:"",type:"number",error:W.message,onChange:function(e){var t=Number.parseFloat(e.target.value);r(Number.isNaN(t)?void 0:t),T.current=!0}}),Object(b.jsx)("div",{className:"transaction-form--fee",children:Object(b.jsx)(B,{isLoadingFee:h,fee:C})}),Object(b.jsx)("div",{children:Object(b.jsx)(m,{actionType:"primary",isDisabled:j||W.isSendDisabled,onClick:function(){i&&k({to:t.address,value:M.b.parseEther(i.toString())}),O(!0)},children:"Send"})})]}),Object(b.jsx)("div",{className:"transaction-form--mining-loader",children:j&&Object(b.jsx)(S,{text:"Sending in progress..."})})]})}),Y=(a(119),function(e,t){return e.name.localeCompare(t.name)}),Z=function(e){return function(t){return t.name!==(null===e||void 0===e?void 0:e.name)}},z=function(){var e=Object(c.useState)("placeholder"),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(),i=Object(d.a)(s,2),r=i[0],o=i[1],l=localStorage.getItem("contacts"),u=l?JSON.parse(l):[];return Object(b.jsxs)("div",{className:"address-book",children:[Object(b.jsx)("div",{className:"address-book--left",children:Object(b.jsx)(h,{contacts:u,onAddNewContact:function(){o(void 0),n("add")},onSelectContact:function(e){o(e),n("transaction")}})}),Object(b.jsxs)("div",{className:"address-book--right",children:["add"===a&&Object(b.jsx)(U,{formMode:"add",contacts:u,onSave:function(e){localStorage.setItem("contacts",JSON.stringify([].concat(Object(v.a)(u),[e]).sort(Y))),n("placeholder")}}),"edit"===a&&Object(b.jsx)(U,{formMode:"edit",contacts:u,selectedContact:r,onSave:function(e){localStorage.setItem("contacts",JSON.stringify([].concat(Object(v.a)(u.filter(Z(r))),[e]).sort(Y))),n("placeholder")},onDelete:function(){localStorage.setItem("contacts",JSON.stringify(Object(v.a)(u.filter(Z(r))).sort(Y))),n("placeholder")}}),"transaction"===a&&r&&Object(b.jsx)(W,{contact:r,onEditContact:function(){n("edit")}},r.name),"placeholder"===a&&Object(b.jsx)("div",{className:"address-book--right--placeholder",children:"Select a contact or add a new one to begin."})]})]})},G=(a(120),function(e){var t=e.message,a=e.type;return Object(b.jsx)("div",{className:"notification ".concat(a),children:t},Math.random())}),V=Object(c.createContext)(void 0);var q=function(){var e=Object(c.useState)(),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(l.a)().account;return Object(b.jsx)(V.Provider,{value:{setNotification:n},children:Object(b.jsxs)("div",{className:"main",children:[s?Object(b.jsx)(z,{}):Object(b.jsx)(O,{}),a&&Object(b.jsx)(G,{message:null===a||void 0===a?void 0:a.message,type:null===a||void 0===a?void 0:a.type})]})})},H=(a(121),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,142)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),s(e),i(e)})).catch((function(e){return console.log("reportWebVitals",e)}))});r.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(o.a,{config:{},children:Object(b.jsx)(q,{})})}),document.getElementById("root")),H()},98:function(e,t,a){}},[[122,1,2]]]);
//# sourceMappingURL=main.8ab93ecf.chunk.js.map