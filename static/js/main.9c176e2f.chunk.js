(this["webpackJsonpmetamask-address-book"]=this["webpackJsonpmetamask-address-book"]||[]).push([[0],{100:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t){},117:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){"use strict";a.r(t);var n,c=a(9),s=a.n(c),r=a(78),i=a.n(r),o=a(136),d=a(80),l=a(79),j=a.n(l),b=(a(98),a(8)),u=function(e){var t=e.children,a=e.actionType,n=void 0===a?"primary":a,c=e.isDisabled,s=e.onClick;return Object(b.jsx)("button",{className:j()("btn","btn--".concat(n),{btn__disabled:c}),onClick:s,type:"button",disabled:c,children:t})},m=(a(100),function(){var e=Object(d.a)().activateBrowserWallet;return Object(b.jsxs)("section",{className:"sign-in",children:[Object(b.jsx)("img",{width:"256",alt:"MetaMask Fox",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/36/MetaMask_Fox.svg/256px-MetaMask_Fox.svg.png"}),Object(b.jsx)("h1",{children:"Crypto address book"}),Object(b.jsxs)("p",{className:"sign-in--text",children:["The easiest and quickest way to manage and pay your contacts. ",Object(b.jsx)("br",{})," ","Connect yout wallet to begin."]}),Object(b.jsx)(u,{actionType:"primary",onClick:function(){e()},children:"Connect Wallet"})]})}),O=a(27),p=a(16),v=(a(102),function(e){return e.split(" ").map((function(e){var t;return null===(t=e[0])||void 0===t?void 0:t.toUpperCase()})).slice(0,2)}),f=function(e){var t=e.name;return Object(b.jsx)("div",{className:"avatar-placeholder",children:v(t)})},h=(a(103),function(e){var t=e.contacts,a=e.onAddNewContact,n=e.onSelectContact;return Object(b.jsxs)("div",{className:"contact-list",children:[Object(b.jsx)("h1",{children:"Address Book"}),Object(b.jsx)(u,{actionType:"link",onClick:a,children:Object(b.jsxs)("div",{className:"contact-list--new-contact",children:[Object(b.jsx)("div",{children:"+"}),Object(b.jsx)("div",{children:"New Contact"})]})}),Object(b.jsx)("div",{className:"contact-list--contacts",children:t.map((function(e){return Object(b.jsxs)(u,{actionType:"link",onClick:function(){n(e)},children:[Object(b.jsx)(f,{name:e.name}),Object(b.jsx)("span",{className:"contact-card--name",children:e.name})]},e.name)}))})]})}),N=a(11),x=(a(104),function(e){var t=e.label,a=e.id,n=e.value,c=e.type,s=e.error,r=e.onChange;return Object(b.jsxs)("label",{htmlFor:a,className:"input ".concat(s?"input__error":""),children:[Object(b.jsx)("span",{children:t}),Object(b.jsx)("input",{type:c,id:a,value:n,onChange:r,required:!!s}),Object(b.jsx)("span",{children:s})]})}),S=(a(105),function(e){var t=e.text;return Object(b.jsxs)("div",{className:"loader--container",children:[Object(b.jsx)("div",{className:"loader--spinner"}),Object(b.jsx)("span",{children:t})]})});!function(e){e[e.UPDATE_NAME=0]="UPDATE_NAME",e[e.UPDATE_ADDRESS=1]="UPDATE_ADDRESS",e[e.UPDATE_ENS_NAME=2]="UPDATE_ENS_NAME",e[e.SELECT_ADDRESS_INPUT_TYPE=3]="SELECT_ADDRESS_INPUT_TYPE"}(n||(n={}));var E=function(e){return{type:n.UPDATE_NAME,payload:{name:e}}},y=function(e){return{type:n.UPDATE_ADDRESS,payload:{address:e}}},D=function(e){return{type:n.UPDATE_ENS_NAME,payload:{ensName:e}}},C=function(e,t){return{type:n.SELECT_ADDRESS_INPUT_TYPE,payload:{addressInputType:e,selectedContact:t}}},g=function(e,t){switch(t.type){case n.UPDATE_NAME:var a=t.payload.name;return Object(N.a)(Object(N.a)({},e),{},{editedContact:Object(N.a)(Object(N.a)({},e.editedContact),{},{name:a}),isDirtyMap:Object(N.a)(Object(N.a)({},e.isDirtyMap),{},{name:!0})});case n.UPDATE_ADDRESS:var c=t.payload.address;return Object(N.a)(Object(N.a)({},e),{},{editedContact:Object(N.a)(Object(N.a)({},e.editedContact),{},{address:c}),isDirtyMap:Object(N.a)(Object(N.a)({},e.isDirtyMap),{},{address:!0})});case n.UPDATE_ENS_NAME:var s=t.payload.ensName;return Object(N.a)(Object(N.a)({},e),{},{editedContact:Object(N.a)(Object(N.a)({},e.editedContact),{},{ensName:s}),isDirtyMap:Object(N.a)(Object(N.a)({},e.isDirtyMap),{},{ensName:!0})});case n.SELECT_ADDRESS_INPUT_TYPE:var r,i,o=t.payload,d=o.addressInputType,l=o.selectedContact;return"address"===d?Object(N.a)(Object(N.a)({},e),{},{addressInputType:d,editedContact:Object(N.a)(Object(N.a)({},e.editedContact),{},{ensName:null!==(r=null===l||void 0===l?void 0:l.ensName)&&void 0!==r?r:""}),isDirtyMap:Object(N.a)(Object(N.a)({},e.isDirtyMap),{},{ensName:!1})}):"ensName"===d?Object(N.a)(Object(N.a)({},e),{},{addressInputType:d,editedContact:Object(N.a)(Object(N.a)({},e.editedContact),{},{address:null!==(i=null===l||void 0===l?void 0:l.address)&&void 0!==i?i:""}),isDirtyMap:Object(N.a)(Object(N.a)({},e.isDirtyMap),{},{address:!1})}):e;default:return e}},T=(a(106),function(e){var t,a=e.addressInputType,n=e.selectedContact,s=e.editedContact,r=e.formErrors,i=e.dispatch;return Object(b.jsxs)(c.Fragment,{children:[Object(b.jsxs)("div",{className:"address-area--address-type-switch ".concat(a),children:[Object(b.jsx)(u,{actionType:"link",onClick:function(){i(C("address",n))},children:"Address"}),Object(b.jsx)(u,{actionType:"link",onClick:function(){i(C("ensName",n))},children:"ENS"})]}),"address"===a&&Object(b.jsx)(x,{label:"Address",id:"address",type:"text",value:s.address,error:r.address,onChange:function(e){i(y(e.target.value))}}),"ensName"===a&&Object(b.jsx)(x,{label:"ENS Name",id:"ensName",type:"text",value:null!==(t=s.ensName)&&void 0!==t?t:"",error:r.ensName,onChange:function(e){i(D(e.target.value))}})]})}),k=a(1),A=a.n(k),P=a(20),_=a(137),M=function(){var e=Object(P.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=new _.a.EtherscanProvider("rinkeby","QSS16G3BBVXPZ5SKDZ8WE1SEAJB8NUJ9TU"),e.abrupt("return",a.resolveName(t));case 5:e.prev=5,e.t0=e.catch(0),console.log("error while resolving ens name",e.t0);case 8:return e.abrupt("return",void 0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),w=(a(117),function(e){var t=e.formMode,a=e.contacts,n=e.selectedContact,s=e.onSave,r=e.onDelete,i=Object(c.useReducer)(g,function(e){return{editedContact:null!==e&&void 0!==e?e:{name:"",address:"",ensName:""},isDirtyMap:{name:!1,address:!1,ensName:!1},addressInputType:"address"}}(n)),o=Object(p.a)(i,2),d=o[0],l=o[1],j=Object(c.useState)(!1),m=Object(p.a)(j,2),O=m[0],v=m[1],f=Object(c.useState)({isSaveDisabled:!1}),h=Object(p.a)(f,2),y=h[0],D=h[1];return Object(c.useEffect)((function(){D(function(e,t,a,n,c){var s={isSaveDisabled:!1};return t.address&&!_.b.isAddress(e.address)&&(s=Object(N.a)(Object(N.a)({},s),{},{address:"Please enter a valid Ethereum address",isSaveDisabled:!0})),""===e.name&&(s=Object(N.a)(Object(N.a)({},s),{},{name:t.name&&""===e.name?"Please enter a name":void 0,isSaveDisabled:!0})),t.address&&""===e.address&&(s=Object(N.a)(Object(N.a)({},s),{},{address:""===e.address?"Please enter an address":void 0,isSaveDisabled:!0})),t.ensName&&""===e.ensName&&(s=Object(N.a)(Object(N.a)({},s),{},{ensName:""===e.ensName?"Please enter an ENS name":void 0,isSaveDisabled:!0})),""===e.address&&""===e.ensName&&(s=Object(N.a)(Object(N.a)({},s),{},{isSaveDisabled:!0})),t.name&&e.name!==(null===n||void 0===n?void 0:n.name)&&(null===c||void 0===c?void 0:c.find((function(t){return t.name===e.name})))&&(s=Object(N.a)(Object(N.a)({},s),{},{name:"".concat(e.name," already exists"),isSaveDisabled:!0})),t.name||t.address||t.ensName||(s=Object(N.a)(Object(N.a)({},s),{},{isSaveDisabled:!0})),"edit"===a&&e.name===(null===n||void 0===n?void 0:n.name)&&e.address===(null===n||void 0===n?void 0:n.address)&&e.ensName===(null===n||void 0===n?void 0:n.ensName)&&(s=Object(N.a)(Object(N.a)({},s),{},{isSaveDisabled:!0})),s}(d.editedContact,d.isDirtyMap,t,n,a))}),[d,t,n,a]),Object(b.jsxs)("div",{className:"contact-form--container",children:[Object(b.jsxs)("h1",{className:"contact-form--header",children:["edit"===t?"Edit":"New"," Contact"]}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault()},className:"contact-form--form",children:[Object(b.jsx)(x,{label:"Name",id:"name",type:"text",value:d.editedContact.name,error:y.name,onChange:function(e){l(E(e.target.value))}}),Object(b.jsx)(T,{addressInputType:d.addressInputType,selectedContact:n,editedContact:d.editedContact,formErrors:y,dispatch:l}),Object(b.jsxs)("div",{className:"contact-form--form--actions",children:["edit"===t&&Object(b.jsx)(u,{actionType:"tertiary",onClick:function(){r&&r()},children:"Delete Contact"}),Object(b.jsx)(u,{actionType:"primary",isDisabled:y.isSaveDisabled,onClick:function(){d.editedContact&&("ensName"===d.addressInputType&&d.editedContact.ensName?(v(!0),M(d.editedContact.ensName).then((function(e){e&&s(Object(N.a)(Object(N.a)({},d.editedContact),{},{address:e})),D(Object(N.a)(Object(N.a)({},y),{},{ensName:"Provided ENS name was not recognised",isSaveDisabled:!0})),v(!1)}))):s(d.editedContact))},children:"Save"}),Object(b.jsx)("div",{className:"contact-form--loader",children:O&&Object(b.jsx)(S,{text:"Checking ENS name"})})]})]})]})}),U=a(139),I=a(138),F=a(88),B=function(e){var t=e.isLoadingFee,a=e.fee;return void 0!==a||t?t?Object(b.jsx)(S,{text:"Estimating tx fee... "}):Object(b.jsxs)("span",{children:["Estimated tx fee: ",null===a||void 0===a?void 0:a.eth.slice(0,8)," ETH,"," ",(null===a||void 0===a?void 0:a.nzd)&&"$".concat(a.nzd," NZD")]}):Object(b.jsx)("span",{children:"Enter amount to see the estimated tx fee"})},J=function(){var e=Object(P.a)(A.a.mark((function e(t,a,n){var c,s,r,i,o,d,l;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new _.a.EtherscanProvider("rinkeby","QSS16G3BBVXPZ5SKDZ8WE1SEAJB8NUJ9TU"),e.prev=1,e.next=4,Promise.all([c.estimateGas({to:a,value:_.b.parseEther(t.toString())}),c.getGasPrice()]);case 4:return s=e.sent,r=Object(p.a)(s,2),i=r[0],o=r[1],d=_.b.formatEther(i.mul(o)),l=n&&(Number.parseFloat(d)*Number.parseFloat(n)).toFixed(2).toString(),e.abrupt("return",{eth:d,nzd:l});case 13:e.prev=13,e.t0=e.catch(1),console.log("error while estimating gas",e.t0);case 16:return e.abrupt("return",void 0);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,a,n){return e.apply(this,arguments)}}(),R=(a(118),function(e){var t=e.contact,a=e.onEditContact,n=Object(c.useState)(),s=Object(p.a)(n,2),r=s[0],i=s[1],o=Object(c.useState)(!1),l=Object(p.a)(o,2),j=l[0],m=l[1],O=Object(c.useState)(!1),v=Object(p.a)(O,2),h=v[0],E=v[1],y=Object(c.useState)(),D=Object(p.a)(y,2),C=D[0],g=D[1],T=Object(U.a)(),k=T.sendTransaction,M=T.state,w=Object(d.a)().account,R=Object(I.a)(w),L=Object(F.a)("ethereum","nzd"),W=Object(c.useRef)(!1),Z=Object(c.useMemo)((function(){return function(e,t,a){var n={isSendDisabled:!1};return 0===t&&(n={isSendDisabled:!0}),e&&!t&&(n=Object(N.a)(Object(N.a)({},n),{},{isSendDisabled:!0,message:"Please enter amount"})),e&&a&&t&&_.b.parseUnits(t.toString(),"ether").gt(a)&&(n={isSendDisabled:!0,message:"Please come back from the moon."}),n}(W.current,r,R)}),[W,r,R]);return Object(c.useEffect)((function(){"Mining"!==M.status&&(m(!1),i(0))}),[M]),Object(c.useEffect)((function(){Object(P.a)(A.a.mark((function e(){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=7;break}return E(!0),e.next=4,J(r,t.address,L);case 4:a=e.sent,g(a),E(!1);case 7:case"end":return e.stop()}}),e)})))()}),[r,t.address,L]),Object(b.jsxs)("div",{className:"transaction-form",children:[Object(b.jsxs)("div",{className:"transaction-form--contact-data",children:[Object(b.jsxs)("h1",{children:["Send to ",t.name]}),Object(b.jsx)("div",{className:"transaction-form--address",children:t.address}),Object(b.jsx)(f,{name:t.name}),Object(b.jsx)(u,{actionType:"link",onClick:function(){a()},children:"edit contact"})]}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault()},className:"transaction-form--form",children:[Object(b.jsx)(x,{label:"Transaction amount",id:"transactionAmount",value:null!==r&&void 0!==r?r:"",type:"number",error:Z.message,onChange:function(e){var t=Number.parseFloat(e.target.value);i(Number.isNaN(t)?void 0:t),W.current=!0}}),Object(b.jsx)("div",{className:"transaction-form--fee",children:Object(b.jsx)(B,{isLoadingFee:h,fee:C})}),Object(b.jsx)("div",{children:Object(b.jsx)(u,{actionType:"primary",isDisabled:j||Z.isSendDisabled,onClick:function(){m(!0),r&&k({to:t.address,value:_.b.parseEther(r.toString())})},children:"Send"})})]}),Object(b.jsx)("div",{className:"transaction-form--mining-loader",children:j&&Object(b.jsx)(S,{text:"Mining in progress..."})})]})}),L=(a(119),function(e,t){return e.name.localeCompare(t.name)}),W=function(e){return function(t){return t.name!==(null===e||void 0===e?void 0:e.name)}},Z=function(){var e=Object(c.useState)("placeholder"),t=Object(p.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(),r=Object(p.a)(s,2),i=r[0],o=r[1],d=localStorage.getItem("contacts"),l=d?JSON.parse(d):[];return Object(b.jsxs)("div",{className:"address-book",children:[Object(b.jsx)("div",{className:"address-book--left",children:Object(b.jsx)(h,{contacts:l,onAddNewContact:function(){o(void 0),n("add")},onSelectContact:function(e){o(e),n("transaction")}})}),Object(b.jsxs)("div",{className:"address-book--right",children:["add"===a&&Object(b.jsx)(w,{formMode:"add",contacts:l,onSave:function(e){localStorage.setItem("contacts",JSON.stringify([].concat(Object(O.a)(l),[e]).sort(L))),n("placeholder")}}),"edit"===a&&Object(b.jsx)(w,{formMode:"edit",contacts:l,selectedContact:i,onSave:function(e){localStorage.setItem("contacts",JSON.stringify([].concat(Object(O.a)(l.filter(W(i))),[e]).sort(L))),n("placeholder")},onDelete:function(){localStorage.setItem("contacts",JSON.stringify(Object(O.a)(l.filter(W(i))).sort(L))),n("placeholder")}}),"transaction"===a&&i&&Object(b.jsx)(R,{contact:i,onEditContact:function(){n("edit")}},i.name),"placeholder"===a&&Object(b.jsx)("div",{className:"address-book--right--placeholder",children:"Select a contact or add a new one to begin."})]})]})};var z=function(){var e=Object(d.a)().account;return Object(b.jsx)("div",{className:"main",children:e?Object(b.jsx)(Z,{}):Object(b.jsx)(m,{})})},G=(a(120),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,141)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)})).catch((function(e){return console.log("reportWebVitals",e)}))});i.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(o.a,{config:{},children:Object(b.jsx)(z,{})})}),document.getElementById("root")),G()},98:function(e,t,a){}},[[121,1,2]]]);
//# sourceMappingURL=main.9c176e2f.chunk.js.map